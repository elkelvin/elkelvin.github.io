(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"7fMJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("fXoL"),r=n("i1ol"),o=n("cPV5"),c=n("0zEI"),s=n("Gdn9"),a=n("g9iH"),d=n("ofXK"),l=n("7LiV");const u=function(t){return{"background-color":t}};function p(t,e){if(1&t){const t=i.Qb();i.Pb(0,"div",8),i.Wb("click",(function(){i.sc(t);const n=e.$implicit;return i.Yb(3).onSelected(n)})),i.Kb(1,"img",9),i.Ob()}if(2&t){const t=e.$implicit;i.fc("ngStyle",i.ic(2,u,t.isSelected?"rgba(38, 143, 255, 0.5)":"white")),i.yb(1),i.gc("src",t.icon,i.uc)}}function b(t,e){if(1&t&&(i.Pb(0,"div",5),i.Pb(1,"div",6),i.zc(2,p,2,4,"div",7),i.Ob(),i.Ob()),2&t){const t=i.Yb(2);i.yb(2),i.fc("ngForOf",t.trNodeBrandChildren)}}function g(t,e){if(1&t&&(i.Pb(0,"p-accordion"),i.Pb(1,"p-accordionTab",3),i.zc(2,b,3,1,"div",4),i.Ob(),i.Ob()),2&t){const t=i.Yb();i.yb(2),i.fc("ngIf",t.trNodeBrandChildren.length>0)}}let h=(()=>{class t{constructor(t,e,n,i){this.alertService=t,this.categoryService=e,this.businessService=n,this.productService=i,this.hasBrands=!0,this.trNodeBrandChildren=[]}ngOnInit(){this.onLoadCategories(),this.hasBrands&&this.businessService.getBrands().subscribe(t=>{this.loadBrands(t)})}onLoadCategories(){let t=this.categoryService.Categories;null!=t||t.length>0?this.categoryService.getCategories().subscribe(e=>{e.response?(t=e.data,this.generateTree(t)):this.alertService.showNotification(e.message.type,e.message.message,"Nayarit Mio",e.message.multiLine)},t=>{console.log("Ha ocurrido un problema en el Product Menu Component (Categories)",t)}):this.generateTree(t)}generateTree(t){let e=this.generateNode(t);e.unshift({label:"Todas",data:-1,icon:"pi pi-tags"}),this.trNodeCategories=[{label:"Categorias",data:"Categorias",children:e}]}generateNode(t){return t.map(t=>{let e={label:t.name,data:""+t._id,icon:t.icon};return t.subCategories&&(e.children=this.generateNode(t.subCategories)),e})}loadBrands(t){this.trNodeBrandChildren=t.map(t=>({label:t.name,key:String(t._id),type:"img",icon:t.logo,isSelected:!1}))}nodeSelect(t){this.productService.setProductsByCategory(String(t.node.data))}onSelected(t){t.isSelected=!t.isSelected,this.productService.setProductsByBrand(this.trNodeBrandChildren)}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.a),i.Jb(o.a),i.Jb(c.a),i.Jb(s.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-products-menu"]],inputs:{hasBrands:["brands","hasBrands"]},decls:3,vars:2,consts:[[1,"p-d-flex","p-flex-column","ny-w-100"],["selectionMode","single",3,"value","onNodeSelect"],[4,"ngIf"],["header","Marcas"],["class","p-d-flex p-jc-center",4,"ngIf"],[1,"p-d-flex","p-jc-center"],[1,"p-grid","ny-w-100"],["class","\n                    p-col-4 lc-brand p-mx-1 p-mt-1",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"p-col-4","lc-brand","p-mx-1","p-mt-1",3,"ngStyle","click"],["width","90%","height","90%",3,"src"]],template:function(t,e){1&t&&(i.Pb(0,"div",0),i.Pb(1,"p-tree",1),i.Wb("onNodeSelect",(function(t){return e.nodeSelect(t)})),i.Ob(),i.zc(2,g,3,1,"p-accordion",2),i.Ob()),2&t&&(i.yb(1),i.fc("value",e.trNodeCategories),i.yb(1),i.fc("ngIf",e.hasBrands))},directives:[a.a,d.l,l.a,l.c,d.k,d.m],styles:[".lc-brand[_ngcontent-%COMP%]{width:66px;height:44px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.lc-brand[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 #000}"]}),t})()},Gdn9:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("2Vo4"),r=n("LRne"),o=n("jeYy"),c=n("fXoL");let s=(()=>{class t{constructor(){this.Products=o.h,this.allProducts=this.Products.slice(),this.bhSubProducts=new i.a(this.Products)}getProducts(){return this.bhSubProducts.next(this.Products.slice()),Object(r.a)(this.Products)}setProductsByCategory(t){this.bhSubProducts.next("-1"==t?this.Products:this.Products.filter(e=>e.category._id==t).slice())}setBusiness(t,e=null){if(t){let t=this.getProductByBrand(e);this.Products=t}else this.Products=this.allProducts;this.bhSubProducts.next(this.Products)}setProductsByBrand(t){let e=this.getProductByBrand(t);this.bhSubProducts.next(e.length>0?e:this.Products)}getProductByBrand(t){let e=[];return null!=t&&t.length>0&&(e=this.allProducts.filter(e=>!!t.find(t=>String(t.key)===String(e.brand._id)&&t.isSelected)).slice()),e}getProductById(t){return Object(r.a)(this.Products.find(e=>e._id==t))}addProduct(t){this.Products=[...this.Products,t],this.bhSubProducts.next(this.Products)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},YPYr:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("fXoL"),r=n("Gdn9"),o=n("tyNb"),c=n("kVqo"),s=n("8CEF"),a=n("7zfz"),d=n("ofXK"),l=n("arFO"),u=n("3Pt+"),p=n("7kUa"),b=n("z8Lm"),g=n("7fMJ"),h=n("jIHw"),m=n("Js94");function f(t,e){1&t&&(i.Pb(0,"div",0),i.Kb(1,"app-products-menu"),i.Ob())}const y=function(){return{width:"280px"}};function P(t,e){if(1&t&&(i.Pb(0,"p-overlayPanel",15,16),i.zc(2,f,2,0,"ng-template",17),i.Ob()),2&t){i.Yb(2);const t=i.rc(2);i.xc(i.hc(3,y)),i.fc("appendTo",t)}}function O(t,e){if(1&t){const t=i.Qb();i.Pb(0,"button",18),i.Wb("click",(function(e){return i.sc(t),i.Yb(2).opCategories.toggle(e)})),i.Ob()}}function x(t,e){if(1&t){const t=i.Qb();i.Pb(0,"div",6),i.Pb(1,"div",7),i.zc(2,P,3,4,"p-overlayPanel",8),i.zc(3,O,1,0,"button",9),i.Pb(4,"p-dropdown",10),i.Wb("ngModelChange",(function(e){return i.sc(t),i.Yb().sortKey=e}))("onChange",(function(e){return i.sc(t),i.Yb().onSortChange(e)})),i.Ob(),i.Pb(5,"span",11),i.Kb(6,"i",12),i.Pb(7,"input",13),i.Wb("input",(function(e){return i.sc(t),i.Yb(),i.rc(2).filter(e.target.value)})),i.Ob(),i.Ob(),i.Ob(),i.Kb(8,"p-dataViewLayoutOptions",14),i.Ob()}if(2&t){const t=i.Yb();i.yb(2),i.fc("ngIf",t.showMenu),i.yb(1),i.fc("ngIf",t.showMenu),i.yb(1),i.fc("options",t.sortOptions)("ngModel",t.sortKey)}}const v=function(t){return["/products",t]},C=function(t){return{color:t}};function w(t,e){if(1&t){const t=i.Qb();i.Pb(0,"div",19),i.Pb(1,"div",20),i.Kb(2,"img",21),i.Pb(3,"div",22),i.Pb(4,"div",23),i.Bc(5),i.Ob(),i.Pb(6,"div",24),i.Bc(7),i.Ob(),i.Kb(8,"p-rating",25),i.Kb(9,"i",26),i.Pb(10,"span",27),i.Bc(11),i.Ob(),i.Ob(),i.Pb(12,"div",28),i.Pb(13,"span",29),i.Bc(14),i.Ob(),i.Pb(15,"p-button",30),i.Wb("click",(function(){i.sc(t);const n=e.$implicit;return i.Yb().onAddProduct(n)})),i.Ob(),i.Pb(16,"span",31),i.Bc(17),i.Ob(),i.Ob(),i.Ob(),i.Ob()}if(2&t){const t=e.$implicit;i.yb(2),i.gc("src",t.images[0],i.uc),i.fc("routerLink",i.ic(13,v,t.id)),i.yb(3),i.Cc(t.name),i.yb(2),i.Cc(t.description),i.yb(1),i.fc("ngModel",t.rating)("readonly",!0)("cancel",!1),i.yb(1),i.fc("ngStyle",i.ic(15,C,"AGOTADO"===t.status?"var(--ny-red)":"EN STOCK"===t.status?"var(--ny-green)":"var(--ny-orange)")),i.yb(2),i.Cc(t.category.name),i.yb(3),i.Dc("$",t.basePrice,""),i.yb(1),i.fc("disabled","AGOTADO"===t.status),i.yb(1),i.fc("ngStyle",i.ic(17,C,"AGOTADO"===t.status?"var(--ny-red)":"EN STOCK"===t.status?"var(--ny-green)":"var(--ny-orange)")),i.yb(1),i.Cc(t.status)}}const S=function(t){return{"border-bottom":t}};function B(t,e){if(1&t){const t=i.Qb();i.Pb(0,"div",32),i.Pb(1,"div",33),i.Pb(2,"div",34),i.Pb(3,"div",35),i.Kb(4,"i",36),i.Pb(5,"span",27),i.Bc(6),i.Ob(),i.Ob(),i.Ob(),i.Pb(7,"div",37),i.Pb(8,"img",38),i.Wb("click",(function(){i.sc(t);const n=e.$implicit;return i.Yb().onDetail(n.id)})),i.Ob(),i.Pb(9,"div",39),i.Bc(10),i.Ob(),i.Kb(11,"p-rating",25),i.Ob(),i.Pb(12,"div",40),i.Pb(13,"span",29),i.Bc(14),i.Ob(),i.Pb(15,"p-button",41),i.Wb("click",(function(){i.sc(t);const n=e.$implicit;return i.Yb().onAddProduct(n)})),i.Ob(),i.Ob(),i.Ob(),i.Ob()}if(2&t){const t=e.$implicit;i.yb(2),i.fc("ngStyle",i.ic(10,S,"AGOTADO"===t.status?"1px solid var(--ny-red)":"EN STOCK"===t.status?"1px solid var(--ny-green)":"1px solid var(--ny-orange)")),i.yb(2),i.fc("ngStyle",i.ic(12,C,"AGOTADO"===t.status?"var(--ny-red)":"EN STOCK"===t.status?"var(--ny-green)":"var(--ny-orange)")),i.yb(2),i.Cc(t.category.name),i.yb(2),i.gc("src",t.images[0],i.uc),i.yb(2),i.Dc("",t.name," "),i.yb(1),i.fc("ngModel",t.rating)("readonly",!0)("cancel",!1),i.yb(3),i.Dc("$",t.basePrice,""),i.yb(1),i.fc("disabled","AGOTADO"===t.status)}}let M=(()=>{class t{constructor(t,e,n){this.productService=t,this.router=e,this.orderService=n,this.showMenu=!0}ngOnInit(){this.sortOptions=[{label:"Mayor a menor precio",value:"!basePrice"},{label:"Menor a mayor precio",value:"basePrice"}],this.productService.bhSubProducts.subscribe(t=>{this.products=t,console.log("PRODUCTOS DATAVIEW",this.products)})}onSortChange(t){let e=t.value;0===e.indexOf("!")?(this.sortOrder=-1,this.sortField=e.substring(1,e.length)):(this.sortOrder=1,this.sortField=e)}onDetail(t){this.router.navigate(["ny","products",t])}onAddProduct(t){this.orderService.AddProduct({product:t.name,sku:t.sku,quantity:1,price:t.basePrice,images:t.images[0]})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.a),i.Jb(o.b),i.Jb(c.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-dataview"]],inputs:{showMenu:["Menu","showMenu"]},decls:6,vars:5,consts:[[1,"ny-w-100"],["filterBy","name","layout","grid",3,"value","paginator","rows","sortField","sortOrder"],["dv",""],["pTemplate","header"],["pTemplate","listItem"],["pTemplate","gridItem"],[1,"p-d-flex","p-jc-between"],[1,"p-d-flex","p-jc-start"],[3,"appendTo","style",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","class","p-button-rounded p-button-text p-button-plain\n                ny-no-lg-min",3,"click",4,"ngIf"],["placeholder","Filtrar Por Precio","styleClass","p-mb-2 p-mb-md-0 p-mx-md-2 ny-no-md-max",3,"options","ngModel","ngModelChange","onChange"],[1,"p-input-icon-left","p-mb-2","p-mb-md-0"],[1,"pi","pi-search"],["type","search","pInputText","","placeholder","Buscar por Nombre",3,"input"],[1,"ny-no-sm-max"],[3,"appendTo"],["opCategories",""],["pTemplate",""],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","p-button-plain","ny-no-lg-min",3,"click"],[1,"p-col-12"],[1,"product-list-item"],[1,"ny-cursor",3,"src","routerLink"],[1,"product-list-detail"],[1,"product-name",2,"margin","0 0 0.6rem 0"],[1,"product-description","p-mb-2"],[3,"ngModel","readonly","cancel"],[1,"pi","pi-tag","product-category-icon",3,"ngStyle"],[1,"product-category"],[1,"product-list-action"],[1,"product-price"],["icon","pi pi-shopping-cart","label","Agregar",3,"disabled","click"],[2,"align-self","flex-end",3,"ngStyle"],[1,"p-col-12","p-sm-6","p-md-4","p-lg-4","p-xl-3"],[1,"product-grid-item","lc-card"],[1,"product-grid-item-top","p-pb-1",3,"ngStyle"],[1,"p-ml-1"],[1,"pi","pi-tag","product-category-icon","p-button-success",3,"ngStyle"],[1,"product-grid-item-content"],[1,"ny-cursor",3,"src","click"],[1,"product-name"],[1,"product-grid-item-bottom"],["icon","pi pi-shopping-cart",3,"disabled","click"]],template:function(t,e){1&t&&(i.Pb(0,"div",0),i.Pb(1,"p-dataView",1,2),i.zc(3,x,9,4,"ng-template",3),i.zc(4,w,18,19,"ng-template",4),i.zc(5,B,16,14,"ng-template",5),i.Ob(),i.Ob()),2&t&&(i.yb(1),i.fc("value",e.products)("paginator",!0)("rows",12)("sortField",e.sortField)("sortOrder",e.sortOrder))},directives:[s.a,a.j,d.l,l.a,u.l,u.n,p.a,s.b,b.a,g.a,h.b,o.c,m.a,d.m,h.a],styles:[".lc-card[_ngcontent-%COMP%]{padding:2rem;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);border-radius:4px;margin:1.5rem 2rem 0}@media screen and (min-width:768px){.lc-card[_ngcontent-%COMP%]{margin:1.5rem .75rem 0}}@media screen and (min-width:992px){.lc-card[_ngcontent-%COMP%]{margin:1.5rem .5rem 0}}@media screen and (min-width:1200px){.lc-card[_ngcontent-%COMP%]{margin:1.5rem .5rem 0}}[_nghost-%COMP%]     .p-dropdown{width:14rem;font-weight:400}[_nghost-%COMP%]     .product-name{font-size:1.2rem;font-weight:700;margin:0 0 1rem}[_nghost-%COMP%]     .product-category-icon{vertical-align:middle;margin-right:.5rem}[_nghost-%COMP%]     .product-category{font-weight:600;vertical-align:middle}[_nghost-%COMP%]     .product-list-item{display:flex;align-items:center;padding:1rem;width:100%}[_nghost-%COMP%]     .product-list-item img{width:150px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);margin-right:2rem}[_nghost-%COMP%]     .product-list-item .product-list-detail{flex:1 1 0}[_nghost-%COMP%]     .product-list-item .p-rating{margin:0 0 .5rem}[_nghost-%COMP%]     .product-list-item .product-price{font-size:1.5rem;font-weight:600;margin-bottom:.5rem;align-self:flex-end}[_nghost-%COMP%]     .product-list-item .product-list-action{display:flex;flex-direction:column}[_nghost-%COMP%]     .product-list-item .p-button{margin-bottom:.5rem}[_nghost-%COMP%]     .product-grid-item{margin:.5em;border:1px solid #dee2e6}.product-grid-item-bottom[_ngcontent-%COMP%], [_nghost-%COMP%]     .product-grid-item .product-grid-item-top{display:flex;align-items:center;justify-content:space-between}[_nghost-%COMP%]     .product-grid-item img{width:75%;height:194.09px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);margin:2rem 0}[_nghost-%COMP%]     .product-grid-item .product-grid-item-content{text-align:center;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     .product-grid-item .product-price{font-size:1.5rem;font-weight:600}@media screen and (max-width:576px){[_nghost-%COMP%]     .product-list-item{flex-direction:column;align-items:center}[_nghost-%COMP%]     .product-list-item img{width:calc(175*.75);margin:2rem 0}[_nghost-%COMP%]     .product-list-item .product-list-detail{text-align:center}[_nghost-%COMP%]     .product-list-item .product-price{align-self:center}[_nghost-%COMP%]     .product-list-item .product-list-action{display:flex;flex-direction:column;margin-top:2rem;flex-direction:row;justify-content:space-between;align-items:center;width:100%}}"]}),t})()},rlaK:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),r=n("ofXK"),o=n("NCSE"),c=n("jIHw");function s(t,e){if(1&t){const t=i.Qb();i.Pb(0,"p-fileUpload",4),i.Wb("uploadHandler",(function(e){return i.sc(t),i.Yb().onUploadImage(e)})),i.Ob()}}function a(t,e){if(1&t){const t=i.Qb();i.Pb(0,"img",5),i.Wb("click",(function(){return i.sc(t),i.Yb().onZoomIn()})),i.Ob()}if(2&t){const t=i.Yb();i.gc("width",t.width),i.gc("height",t.height),i.fc("src",t.url,i.uc)}}function d(t,e){if(1&t){const t=i.Qb();i.Pb(0,"button",6),i.Wb("click",(function(){return i.sc(t),i.Yb().onResetImg()})),i.Ob()}}let l=(()=>{class t{constructor(){this.onUpload=new i.n,this.onZoom=new i.n}ngOnInit(){}onUploadImage(t){if(0!==t.files.length){this.file=t.files[0];var e=new FileReader;e.readAsDataURL(t.files[0]),e.onloadend=t=>{this.url=e.result,this.onUpload.emit({file:this.file,url:this.url,index:this.index})}}}onZoomIn(){this.onZoom.emit(this.index)}onResetImg(){this.url=null,this.file=null,this.onUpload.emit({file:this.file,url:this.url,index:this.index})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-upload-image"]],inputs:{index:"index",width:"width",height:"height"},outputs:{onUpload:"onUpload",onZoom:"onZoom"},decls:4,vars:3,consts:[[1,"lc-div-image","p-d-flex","p-jc-center","p-ai-center"],["name","file","customUpload","true","accept","image/*","mode","basic","auto","true",3,"uploadHandler",4,"ngIf"],["style"," position: absolute; z-index: 1;","class","lc-zoom",3,"src","width","height","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-undo","class","p-button-rounded p-button-danger p-button-sm","style","z-index: 2;",3,"click",4,"ngIf"],["name","file","customUpload","true","accept","image/*","mode","basic","auto","true",3,"uploadHandler"],[1,"lc-zoom",2,"position","absolute","z-index","1",3,"src","width","height","click"],["pButton","","pRipple","","type","button","icon","pi pi-undo",1,"p-button-rounded","p-button-danger","p-button-sm",2,"z-index","2",3,"click"]],template:function(t,e){1&t&&(i.Pb(0,"div",0),i.zc(1,s,1,0,"p-fileUpload",1),i.zc(2,a,1,3,"img",2),i.zc(3,d,1,0,"button",3),i.Ob()),2&t&&(i.yb(1),i.fc("ngIf",null==e.url),i.yb(1),i.fc("ngIf",null!=e.url),i.yb(1),i.fc("ngIf",null!=e.url))},directives:[r.l,o.a,c.b],styles:[".lc-zoom[_ngcontent-%COMP%]{cursor:zoom-in}.lc-div-image[_ngcontent-%COMP%]{border:1px solid var(--border-color-dark);background:var(--border-color);color:var(--border-color-dark);width:100%;height:100%}[_nghost-%COMP%]     .p-fileupload>.p-button{color:var(--border-color-dark)!important;background:inherit!important;border:2px solid var(--border-color-dark)!important;padding:0 0 0 6px!important;width:32px!important;height:32px!important;border-radius:50%!important}[_nghost-%COMP%]     .p-fileupload>.p-button:hover{color:#fff!important;background:#2196f3!important;border:1px solid #2196f3!important}"]}),t})()},vsjn:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("2Vo4"),r=n("LRne"),o=n("jeYy"),c=n("fXoL");let s=(()=>{class t{constructor(){this.bhBuyer=new i.a([]),this.lBuyers=o.j,this.bhBuyer.next(this.lBuyers)}addBuyer(t){this.lBuyers=[...o.j,t],this.bhBuyer.next(this.lBuyers)}updateBuyerStatus(t,e){let n=this.lBuyers.find(e=>e._id==t);n&&(n.status=e),this.bhBuyer.next(this.lBuyers)}getBuyerById(t){return Object(r.a)(o.j.find(e=>String(e._id)===t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);